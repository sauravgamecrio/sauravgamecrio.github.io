{"version":3,"file":"compressed-textures.min.js","sources":["../../src/const.ts","../../../../node_modules/tslib/tslib.es6.js","../../src/resources/BlobResource.ts","../../src/resources/CompressedTextureResource.ts","../../../../node_modules/ismobilejs/esm/isMobile.js","../../../settings/dist/esm/settings.js","../../../../node_modules/eventemitter3/index.js","../../../../node_modules/url/node_modules/punycode/punycode.js","../../../../node_modules/url/util.js","../../../../node_modules/querystring/decode.js","../../../../node_modules/querystring/encode.js","../../../../node_modules/querystring/index.js","../../../../node_modules/url/url.js","../../../utils/src/url.ts","../../../utils/src/color/premultiply.ts","../../../utils/src/settings.ts","../../../utils/src/media/CanvasRenderTarget.ts","../../src/loaders/CompressedTextureLoader.ts","../../src/loaders/registerCompressedTextures.ts","../../src/loaders/DDSLoader.ts","../../src/loaders/KTXLoader.ts"],"sourcesContent":["/**\n * WebGL internal formats, including compressed texture formats provided by extensions\n *\n * @memberof PIXI\n * @static\n * @name INTERNAL_FORMATS\n * @enum {number}\n * @property {number} COMPRESSED_RGB_S3TC_DXT1_EXT=0x83F0\n * @property {number} COMPRESSED_RGBA_S3TC_DXT1_EXT=0x83F1\n * @property {number} COMPRESSED_RGBA_S3TC_DXT3_EXT=0x83F2\n * @property {number} COMPRESSED_RGBA_S3TC_DXT5_EXT=0x83F3\n * @property {number} COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917\n * @property {number} COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918\n * @property {number} COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919\n * @property {number} COMPRESSED_SRGB_S3TC_DXT1_EXT=35916\n * @property {number} COMPRESSED_R11_EAC=0x9270\n * @property {number} COMPRESSED_SIGNED_R11_EAC=0x9271\n * @property {number} COMPRESSED_RG11_EAC=0x9272\n * @property {number} COMPRESSED_SIGNED_RG11_EAC=0x9273\n * @property {number} COMPRESSED_RGB8_ETC2=0x9274\n * @property {number} COMPRESSED_RGBA8_ETC2_EAC=0x9278\n * @property {number} COMPRESSED_SRGB8_ETC2=0x9275\n * @property {number} COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=0x9279\n * @property {number} COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=0x9276\n * @property {number} COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=0x9277\n * @property {number} COMPRESSED_RGB_PVRTC_4BPPV1_IMG=0x8C00\n * @property {number} COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=0x8C02\n * @property {number} COMPRESSED_RGB_PVRTC_2BPPV1_IMG=0x8C01\n * @property {number} COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=0x8C03\n * @property {number} COMPRESSED_RGB_ETC1_WEBGL=0x8D64\n * @property {number} COMPRESSED_RGB_ATC_WEBGL=0x8C92\n * @property {number} COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=0x8C92\n * @property {number} COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=0x87EE\n */\nexport enum INTERNAL_FORMATS {\n    // WEBGL_compressed_texture_s3tc\n    COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0,\n    COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1,\n    COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2,\n    COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3,\n\n    // WEBGL_compressed_texture_s3tc_srgb\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT = 35917,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT = 35918,\n    COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT = 35919,\n    COMPRESSED_SRGB_S3TC_DXT1_EXT = 35916,\n\n    // WEBGL_compressed_texture_etc\n    COMPRESSED_R11_EAC = 0x9270,\n    COMPRESSED_SIGNED_R11_EAC = 0x9271,\n    COMPRESSED_RG11_EAC = 0x9272,\n    COMPRESSED_SIGNED_RG11_EAC = 0x9273,\n    COMPRESSED_RGB8_ETC2 = 0x9274,\n    COMPRESSED_RGBA8_ETC2_EAC = 0x9278,\n    COMPRESSED_SRGB8_ETC2 = 0x9275,\n    COMPRESSED_SRGB8_ALPHA8_ETC2_EAC = 0x9279,\n    COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9276,\n    COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2 = 0x9277,\n\n    // WEBGL_compressed_texture_pvrtc\n    COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00,\n    COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02,\n    COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01,\n    COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03,\n\n    // WEBGL_compressed_texture_etc1\n    COMPRESSED_RGB_ETC1_WEBGL = 0x8D64,\n\n    // WEBGL_compressed_texture_atc\n    COMPRESSED_RGB_ATC_WEBGL = 0x8C92,\n    COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8C92, // TODO: Probably a bug on the MDN site\n    COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87EE,\n}\n\n/**\n * Maps the compressed texture formats in {@link PIXI.INTERNAL_FORMATS} to the number of bytes taken by\n * each texel.\n *\n * @memberof PIXI\n * @static\n * @ignore\n */\nexport const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    // WEBGL_compressed_texture_s3tc\n    [INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]: 1,\n\n    // WEBGL_compressed_texture_s3tc\n    [INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]: 1,\n\n    // WEBGL_compressed_texture_etc\n    [INTERNAL_FORMATS.COMPRESSED_R11_EAC]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RG11_EAC]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5, // ~~\n    [INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]: 0.5, // ~~\n\n    // WEBGL_compressed_texture_pvrtc\n    [INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]: 0.25,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]: 0.25,\n\n    // WEBGL_compressed_texture_etc1\n    [INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]: 0.5,\n\n    // @see https://www.khronos.org/registry/OpenGL/extensions/AMD/AMD_compressed_ATC_texture.txt\n    // WEBGL_compressed_texture_atc\n    [INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]: 0.5,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]: 1,\n    [INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]: 1\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","import { Resource, ViewableBuffer, BufferResource } from '@pixi/core';\n\ninterface IBlobOptions\n{\n    autoLoad?: boolean;\n    width: number;\n    height: number;\n}\n\n/**\n * Resource that fetches texture data over the network and stores it in a buffer.\n *\n * @class\n * @extends PIXI.Resource\n * @memberof PIXI\n */\nexport abstract class BlobResource extends BufferResource\n{\n    protected origin: string;\n    protected buffer: ViewableBuffer;\n    protected loaded: boolean;\n\n    /**\n     * @param {string} url - the URL of the texture file\n     * @param {boolean}[autoLoad] - whether to fetch the data immediately;\n     *  you can fetch it later via {@link BlobResource#load}\n     */\n    constructor(source: string | Uint8Array | Uint32Array | Float32Array,\n        options: IBlobOptions = { width: 1, height: 1, autoLoad: true })\n    {\n        let origin: string;\n        let data: Uint8Array | Uint32Array | Float32Array;\n\n        if (typeof source === 'string')\n        {\n            origin = source;\n            data = new Uint8Array();\n        }\n        else\n        {\n            origin = null;\n            data = source;\n        }\n\n        super(data, options);\n\n        /**\n         * The URL of the texture file\n         * @member {string}\n         */\n        this.origin = origin;\n\n        /**\n         * The viewable buffer on the data\n         * @member {ViewableBuffer}\n         */\n        // HINT: BlobResource allows \"null\" sources, assuming the child class provides an alternative\n        this.buffer = data ? new ViewableBuffer(data) : null;\n\n        // Allow autoLoad = \"undefined\" still load the resource by default\n        if (this.origin && options.autoLoad !== false)\n        {\n            this.load();\n        }\n        if (data && data.length)\n        {\n            this.loaded = true;\n            this.onBlobLoaded(this.buffer.rawBinaryData);\n        }\n    }\n\n    protected onBlobLoaded(_data: ArrayBuffer): void\n    {\n        // TODO: Override this method\n    }\n\n    /**\n     * Loads the blob\n     */\n    async load(): Promise<Resource>\n    {\n        const response = await fetch(this.origin);\n        const blob = await response.blob();\n        const arrayBuffer = await blob.arrayBuffer();\n\n        this.data = new Uint32Array(arrayBuffer);\n        this.buffer = new ViewableBuffer(arrayBuffer);\n        this.loaded = true;\n\n        this.onBlobLoaded(arrayBuffer);\n        this.update();\n\n        return this;\n    }\n}\n","import { BlobResource } from './BlobResource';\nimport { INTERNAL_FORMAT_TO_BYTES_PER_PIXEL } from '../const';\nimport { Renderer, BaseTexture, GLTexture } from '@pixi/core';\n\nimport type { INTERNAL_FORMATS } from '../const';\n\n/**\n * @ignore\n */\n// Used in PIXI.KTXLoader\nexport type CompressedLevelBuffer = {\n    levelID: number,\n    levelWidth: number,\n    levelHeight: number,\n    levelBuffer: Uint8Array\n};\n\n/**\n * @ignore\n */\nexport interface ICompressedTextureResourceOptions\n{\n    format: INTERNAL_FORMATS;\n    width: number;\n    height: number;\n    levels?: number;\n    levelBuffers?: CompressedLevelBuffer[];\n}\n\n/**\n * Resource for compressed texture formats, as follows: S3TC/DXTn (& their sRGB formats), ATC, ASTC, ETC 1/2, PVRTC.\n *\n * Compressed textures improve performance when rendering is texture-bound. The texture data stays compressed in\n * graphics memory, increasing memory locality and speeding up texture fetches. These formats can also be used to store\n * more detail in the same amount of memory.\n *\n * For most developers, container file formats are a better abstraction instead of directly handling raw texture\n * data. PixiJS provides native support for the following texture file formats (via {@link PIXI.Loader}):\n *\n * * **.dds** - the DirectDraw Surface file format stores DXTn (DXT-1,3,5) data. See {@link PIXI.DDSLoader}\n * * **.ktx** - the Khronos Texture Container file format supports storing all the supported WebGL compression formats.\n *  See {@link PIXI.KTXLoader}.\n * * **.basis** - the BASIS supercompressed file format stores texture data in an internal format that is transcoded\n *  to the compression format supported on the device at _runtime_. It also supports transcoding into a uncompressed\n *  format as a fallback; you must install the `@pixi/basis-loader`, `@pixi/basis-transcoder` packages separately to\n *  use these files. See {@link PIXI.BasisLoader}.\n *\n * The loaders for the aforementioned formats use `CompressedTextureResource` internally. It is strongly suggested that\n * they be used instead.\n *\n * ## Working directly with CompressedTextureResource\n *\n * Since `CompressedTextureResource` inherits `BlobResource`, you can provide it a URL pointing to a file containing\n * the raw texture data (with no file headers!):\n *\n * ```js\n * // The resource backing the texture data for your textures.\n * // NOTE: You can also provide a ArrayBufferView instead of a URL. This is used when loading data from a container file\n * //   format such as KTX, DDS, or BASIS.\n * const compressedResource = new PIXI.CompressedTextureResource(\"bunny.dxt5\", {\n *   format: PIXI.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n *   width: 256,\n *   height: 256\n * });\n *\n * // You can create a base-texture to the cache, so that future `Texture`s can be created using the `Texture.from` API.\n * const baseTexture = new PIXI.BaseTexture(compressedResource, { pmaMode: PIXI.ALPHA_MODES.NPM });\n *\n * // Create a Texture to add to the TextureCache\n * const texture = new PIXI.Texture(baseTexture);\n *\n * // Add baseTexture & texture to the global texture cache\n * PIXI.BaseTexture.addToCache(baseTexture, \"bunny.dxt5\");\n * PIXI.Texture.addToCache(texture, \"bunny.dxt5\");\n * ```\n *\n * @memberof PIXI\n */\nexport class CompressedTextureResource extends BlobResource\n{\n    public format: INTERNAL_FORMATS;\n    public levels: number;\n\n    // Easy access to the WebGL extension providing support for the compression format via ContextSystem\n    private _extension: 's3tc' | 's3tc_sRGB' | 'atc' | 'astc' | 'etc' | 'etc1' | 'pvrtc';\n    // Buffer views for each mipmap level in the main buffer\n    private _levelBuffers: CompressedLevelBuffer[];\n\n    /**\n     * @param source - the buffer/URL holding the compressed texture data\n     * @param options\n     * @param {PIXI.INTERNAL_FORMATS} options.format - the compression format\n     * @param {number} options.width - the image width in pixels.\n     * @param {number} options.height - the image height in pixels.\n     * @param {number}[options.level=1] - the mipmap levels stored in the compressed texture, including level 0.\n     * @param {number}[options.levelBuffers] - the buffers for each mipmap level. `CompressedTextureResource` can allows you\n     *      to pass `null` for `source`, for cases where each level is stored in non-contiguous memory.\n     */\n    constructor(source: string | Uint8Array | Uint32Array, options: ICompressedTextureResourceOptions)\n    {\n        super(source, options);\n\n        /**\n         * The compression format\n         */\n        this.format = options.format;\n\n        /**\n         * The number of mipmap levels stored in the resource buffer.\n         *\n         * @default 1\n         */\n        this.levels = options.levels || 1;\n\n        this._width = options.width;\n        this._height = options.height;\n\n        this._extension = CompressedTextureResource._formatToExtension(this.format);\n\n        if (options.levelBuffers || this.buffer)\n        {\n            // ViewableBuffer doesn't support byteOffset :-( so allow source to be Uint8Array\n            this._levelBuffers = options.levelBuffers\n                || CompressedTextureResource._createLevelBuffers(\n                    source instanceof Uint8Array ? source : this.buffer.uint8View,\n                    this.format,\n                    this.levels,\n                    4, 4, // PVRTC has 8x4 blocks in 2bpp mode\n                    this.width,\n                    this.height);\n        }\n    }\n\n    /**\n     * @override\n     * @param renderer\n     * @param _texture\n     * @param _glTexture\n     */\n    upload(renderer: Renderer, _texture: BaseTexture, _glTexture: GLTexture): boolean\n    {\n        const gl = renderer.gl;\n        const extension = renderer.context.extensions[this._extension];\n\n        if (!extension)\n        {\n            throw new Error(`${this._extension} textures are not supported on the current machine`);\n        }\n        if (!this._levelBuffers)\n        {\n            // Do not try to upload data before BlobResource loads, unless the levelBuffers were provided directly!\n            return false;\n        }\n\n        for (let i = 0, j = this.levels; i < j; i++)\n        {\n            const { levelID, levelWidth, levelHeight, levelBuffer } = this._levelBuffers[i];\n\n            gl.compressedTexImage2D(gl.TEXTURE_2D, levelID, this.format, levelWidth, levelHeight, 0, levelBuffer);\n        }\n\n        return true;\n    }\n\n    /**\n     * @protected\n     */\n    protected onBlobLoaded(): void\n    {\n        this._levelBuffers = CompressedTextureResource._createLevelBuffers(\n            this.buffer.uint8View,\n            this.format,\n            this.levels,\n            4, 4, // PVRTC has 8x4 blocks in 2bpp mode\n            this.width,\n            this.height);\n    }\n\n    /**\n     * Returns the key (to ContextSystem#extensions) for the WebGL extension supporting the compression format\n     *\n     * @private\n     * @param {PIXI.INTERNAL_FORMATS} format\n     * @return {string}\n     */\n    private static _formatToExtension(format: INTERNAL_FORMATS):\n        's3tc' | 's3tc_sRGB' | 'atc' |\n        'astc' | 'etc' | 'etc1' | 'pvrtc'\n    {\n        if (format >= 0x83F0 && format <= 0x83F3)\n        {\n            return 's3tc';\n        }\n        else if (format >= 0x9270 && format <= 0x9279)\n        {\n            return 'etc';\n        }\n        else if (format >= 0x8C00 && format <= 0x8C03)\n        {\n            return 'pvrtc';\n        }\n        else if (format >= 0x8D64)\n        {\n            return 'etc1';\n        }\n        else if (format >= 0x8C92 && format <= 0x87EE)\n        {\n            return 'atc';\n        }\n\n        throw new Error('Invalid (compressed) texture format given!');\n    }\n\n    /**\n     * Pre-creates buffer views for each mipmap level\n     *\n     * @private\n     * @param {Uint8Array} buffer\n     * @param {PIXI.INTERNAL_FORMATS} format\n     * @param {number} levels\n     * @param {number} blockWidth\n     * @param {number} blockHeight\n     * @param {number} imageWidth\n     * @param {number} imageHeight\n     */\n    private static _createLevelBuffers(\n        buffer: Uint8Array,\n        format: INTERNAL_FORMATS,\n        levels: number,\n        blockWidth: number,\n        blockHeight: number,\n        imageWidth: number,\n        imageHeight: number\n    ): CompressedLevelBuffer[]\n    {\n        // The byte-size of the first level buffer\n        const buffers = new Array<CompressedLevelBuffer>(levels);\n\n        let offset = buffer.byteOffset;\n\n        let levelWidth = imageWidth;\n        let levelHeight = imageHeight;\n        let alignedLevelWidth = (levelWidth + blockWidth - 1) & ~(blockWidth - 1);\n        let alignedLevelHeight = (levelHeight + blockHeight - 1) & ~(blockHeight - 1);\n\n        let levelSize = alignedLevelWidth * alignedLevelHeight * INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[format];\n\n        for (let i = 0; i < levels; i++)\n        {\n            buffers[i] = {\n                levelID: i,\n                levelWidth: levels > 1 ? levelWidth : alignedLevelWidth,\n                levelHeight: levels > 1 ? levelHeight : alignedLevelHeight,\n                levelBuffer: new Uint8Array(buffer.buffer, offset, levelSize)\n            };\n\n            offset += levelSize;\n\n            // Calculate levelBuffer dimensions for next iteration\n            levelWidth = (levelWidth >> 1) || 1;\n            levelHeight = (levelHeight >> 1) || 1;\n            alignedLevelWidth = (levelWidth + blockWidth - 1) & ~(blockWidth - 1);\n            alignedLevelHeight = (levelHeight + blockHeight - 1) & ~(blockHeight - 1);\n            levelSize = alignedLevelWidth * alignedLevelHeight * INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[format];\n        }\n\n        return buffers;\n    }\n}\n","var appleIphone = /iPhone/i;\nvar appleIpod = /iPod/i;\nvar appleTablet = /iPad/i;\nvar appleUniversal = /\\biOS-universal(?:.+)Mac\\b/i;\nvar androidPhone = /\\bAndroid(?:.+)Mobile\\b/i;\nvar androidTablet = /Android/i;\nvar amazonPhone = /(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i;\nvar amazonTablet = /Silk/i;\nvar windowsPhone = /Windows Phone/i;\nvar windowsTablet = /\\bWindows(?:.+)ARM\\b/i;\nvar otherBlackBerry = /BlackBerry/i;\nvar otherBlackBerry10 = /BB10/i;\nvar otherOpera = /Opera Mini/i;\nvar otherChrome = /\\b(CriOS|Chrome)(?:.+)Mobile/i;\nvar otherFirefox = /Mobile(?:.+)Firefox\\b/i;\nvar isAppleTabletOnIos13 = function (navigator) {\n    return (typeof navigator !== 'undefined' &&\n        navigator.platform === 'MacIntel' &&\n        typeof navigator.maxTouchPoints === 'number' &&\n        navigator.maxTouchPoints > 1 &&\n        typeof MSStream === 'undefined');\n};\nfunction createMatch(userAgent) {\n    return function (regex) { return regex.test(userAgent); };\n}\nexport default function isMobile(param) {\n    var nav = {\n        userAgent: '',\n        platform: '',\n        maxTouchPoints: 0\n    };\n    if (!param && typeof navigator !== 'undefined') {\n        nav = {\n            userAgent: navigator.userAgent,\n            platform: navigator.platform,\n            maxTouchPoints: navigator.maxTouchPoints || 0\n        };\n    }\n    else if (typeof param === 'string') {\n        nav.userAgent = param;\n    }\n    else if (param && param.userAgent) {\n        nav = {\n            userAgent: param.userAgent,\n            platform: param.platform,\n            maxTouchPoints: param.maxTouchPoints || 0\n        };\n    }\n    var userAgent = nav.userAgent;\n    var tmp = userAgent.split('[FBAN');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    tmp = userAgent.split('Twitter');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    var match = createMatch(userAgent);\n    var result = {\n        apple: {\n            phone: match(appleIphone) && !match(windowsPhone),\n            ipod: match(appleIpod),\n            tablet: !match(appleIphone) &&\n                (match(appleTablet) || isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone),\n            universal: match(appleUniversal),\n            device: (match(appleIphone) ||\n                match(appleIpod) ||\n                match(appleTablet) ||\n                match(appleUniversal) ||\n                isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone)\n        },\n        amazon: {\n            phone: match(amazonPhone),\n            tablet: !match(amazonPhone) && match(amazonTablet),\n            device: match(amazonPhone) || match(amazonTablet)\n        },\n        android: {\n            phone: (!match(windowsPhone) && match(amazonPhone)) ||\n                (!match(windowsPhone) && match(androidPhone)),\n            tablet: !match(windowsPhone) &&\n                !match(amazonPhone) &&\n                !match(androidPhone) &&\n                (match(amazonTablet) || match(androidTablet)),\n            device: (!match(windowsPhone) &&\n                (match(amazonPhone) ||\n                    match(amazonTablet) ||\n                    match(androidPhone) ||\n                    match(androidTablet))) ||\n                match(/\\bokhttp\\b/i)\n        },\n        windows: {\n            phone: match(windowsPhone),\n            tablet: match(windowsTablet),\n            device: match(windowsPhone) || match(windowsTablet)\n        },\n        other: {\n            blackberry: match(otherBlackBerry),\n            blackberry10: match(otherBlackBerry10),\n            opera: match(otherOpera),\n            firefox: match(otherFirefox),\n            chrome: match(otherChrome),\n            device: match(otherBlackBerry) ||\n                match(otherBlackBerry10) ||\n                match(otherOpera) ||\n                match(otherFirefox) ||\n                match(otherChrome)\n        },\n        any: false,\n        phone: false,\n        tablet: false\n    };\n    result.any =\n        result.apple.device ||\n            result.android.device ||\n            result.windows.device ||\n            result.other.device;\n    result.phone =\n        result.apple.phone || result.android.phone || result.windows.phone;\n    result.tablet =\n        result.apple.tablet || result.android.tablet || result.windows.tablet;\n    return result;\n}\n//# sourceMappingURL=isMobile.js.map","/*!\n * @pixi/settings - v6.0.2\n * Compiled Mon, 05 Apr 2021 18:17:46 UTC\n *\n * @pixi/settings is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport isMobileCall from 'ismobilejs';\n\n// The ESM/CJS versions of ismobilejs only\nvar isMobile = isMobileCall(self.navigator);\n\n/**\n * The maximum recommended texture units to use.\n * In theory the bigger the better, and for desktop we'll use as many as we can.\n * But some mobile devices slow down if there is to many branches in the shader.\n * So in practice there seems to be a sweet spot size that varies depending on the device.\n *\n * In v4, all mobile devices were limited to 4 texture units because for this.\n * In v5, we allow all texture units to be used on modern Apple or Android devices.\n *\n * @private\n * @param {number} max\n * @returns {number}\n */\nfunction maxRecommendedTextures(max) {\n    var allowMax = true;\n    if (isMobile.tablet || isMobile.phone) {\n        if (isMobile.apple.device) {\n            var match = (navigator.userAgent).match(/OS (\\d+)_(\\d+)?/);\n            if (match) {\n                var majorVersion = parseInt(match[1], 10);\n                // Limit texture units on devices below iOS 11, which will be older hardware\n                if (majorVersion < 11) {\n                    allowMax = false;\n                }\n            }\n        }\n        if (isMobile.android.device) {\n            var match = (navigator.userAgent).match(/Android\\s([0-9.]*)/);\n            if (match) {\n                var majorVersion = parseInt(match[1], 10);\n                // Limit texture units on devices below Android 7 (Nougat), which will be older hardware\n                if (majorVersion < 7) {\n                    allowMax = false;\n                }\n            }\n        }\n    }\n    return allowMax ? max : 4;\n}\n\n/**\n * Uploading the same buffer multiple times in a single frame can cause performance issues.\n * Apparent on iOS so only check for that at the moment\n * This check may become more complex if this issue pops up elsewhere.\n *\n * @private\n * @returns {boolean}\n */\nfunction canUploadSameBuffer() {\n    return !isMobile.apple.device;\n}\n\n/**\n * User's customizable globals for overriding the default PIXI settings, such\n * as a renderer's default resolution, framerate, float precision, etc.\n * @example\n * // Use the native window resolution as the default resolution\n * // will support high-density displays when rendering\n * PIXI.settings.RESOLUTION = window.devicePixelRatio;\n *\n * // Disable interpolation when scaling, will make texture be pixelated\n * PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST;\n * @namespace PIXI.settings\n */\nvar settings = {\n    /**\n     * If set to true WebGL will attempt make textures mimpaped by default.\n     * Mipmapping will only succeed if the base texture uploaded has power of two dimensions.\n     *\n     * @static\n     * @name MIPMAP_TEXTURES\n     * @memberof PIXI.settings\n     * @type {PIXI.MIPMAP_MODES}\n     * @default PIXI.MIPMAP_MODES.POW2\n     */\n    MIPMAP_TEXTURES: 1,\n    /**\n     * Default anisotropic filtering level of textures.\n     * Usually from 0 to 16\n     *\n     * @static\n     * @name ANISOTROPIC_LEVEL\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 0\n     */\n    ANISOTROPIC_LEVEL: 0,\n    /**\n     * Default resolution / device pixel ratio of the renderer.\n     *\n     * @static\n     * @name RESOLUTION\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 1\n     */\n    RESOLUTION: 1,\n    /**\n     * Default filter resolution.\n     *\n     * @static\n     * @name FILTER_RESOLUTION\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 1\n     */\n    FILTER_RESOLUTION: 1,\n    /**\n     * The maximum textures that this device supports.\n     *\n     * @static\n     * @name SPRITE_MAX_TEXTURES\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 32\n     */\n    SPRITE_MAX_TEXTURES: maxRecommendedTextures(32),\n    // TODO: maybe change to SPRITE.BATCH_SIZE: 2000\n    // TODO: maybe add PARTICLE.BATCH_SIZE: 15000\n    /**\n     * The default sprite batch size.\n     *\n     * The default aims to balance desktop and mobile devices.\n     *\n     * @static\n     * @name SPRITE_BATCH_SIZE\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 4096\n     */\n    SPRITE_BATCH_SIZE: 4096,\n    /**\n     * The default render options if none are supplied to {@link PIXI.Renderer}\n     * or {@link PIXI.CanvasRenderer}.\n     *\n     * @static\n     * @name RENDER_OPTIONS\n     * @memberof PIXI.settings\n     * @type {object}\n     * @property {HTMLCanvasElement} view=null\n     * @property {number} resolution=1\n     * @property {boolean} antialias=false\n     * @property {boolean} autoDensity=false\n     * @property {boolean} useContextAlpha=true\n     * @property {number} backgroundColor=0x000000\n     * @property {number} backgroundAlpha=1\n     * @property {boolean} clearBeforeRender=true\n     * @property {boolean} preserveDrawingBuffer=false\n     * @property {number} width=800\n     * @property {number} height=600\n     * @property {boolean} legacy=false\n     */\n    RENDER_OPTIONS: {\n        view: null,\n        antialias: false,\n        autoDensity: false,\n        backgroundColor: 0x000000,\n        backgroundAlpha: 1,\n        useContextAlpha: true,\n        clearBeforeRender: true,\n        preserveDrawingBuffer: false,\n        width: 800,\n        height: 600,\n        legacy: false,\n    },\n    /**\n     * Default Garbage Collection mode.\n     *\n     * @static\n     * @name GC_MODE\n     * @memberof PIXI.settings\n     * @type {PIXI.GC_MODES}\n     * @default PIXI.GC_MODES.AUTO\n     */\n    GC_MODE: 0,\n    /**\n     * Default Garbage Collection max idle.\n     *\n     * @static\n     * @name GC_MAX_IDLE\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 3600\n     */\n    GC_MAX_IDLE: 60 * 60,\n    /**\n     * Default Garbage Collection maximum check count.\n     *\n     * @static\n     * @name GC_MAX_CHECK_COUNT\n     * @memberof PIXI.settings\n     * @type {number}\n     * @default 600\n     */\n    GC_MAX_CHECK_COUNT: 60 * 10,\n    /**\n     * Default wrap modes that are supported by pixi.\n     *\n     * @static\n     * @name WRAP_MODE\n     * @memberof PIXI.settings\n     * @type {PIXI.WRAP_MODES}\n     * @default PIXI.WRAP_MODES.CLAMP\n     */\n    WRAP_MODE: 33071,\n    /**\n     * Default scale mode for textures.\n     *\n     * @static\n     * @name SCALE_MODE\n     * @memberof PIXI.settings\n     * @type {PIXI.SCALE_MODES}\n     * @default PIXI.SCALE_MODES.LINEAR\n     */\n    SCALE_MODE: 1,\n    /**\n     * Default specify float precision in vertex shader.\n     *\n     * @static\n     * @name PRECISION_VERTEX\n     * @memberof PIXI.settings\n     * @type {PIXI.PRECISION}\n     * @default PIXI.PRECISION.HIGH\n     */\n    PRECISION_VERTEX: 'highp',\n    /**\n     * Default specify float precision in fragment shader.\n     * iOS is best set at highp due to https://github.com/pixijs/pixi.js/issues/3742\n     *\n     * @static\n     * @name PRECISION_FRAGMENT\n     * @memberof PIXI.settings\n     * @type {PIXI.PRECISION}\n     * @default PIXI.PRECISION.MEDIUM\n     */\n    PRECISION_FRAGMENT: isMobile.apple.device ? 'highp' : 'mediump',\n    /**\n     * Can we upload the same buffer in a single frame?\n     *\n     * @static\n     * @name CAN_UPLOAD_SAME_BUFFER\n     * @memberof PIXI.settings\n     * @type {boolean}\n     */\n    CAN_UPLOAD_SAME_BUFFER: canUploadSameBuffer(),\n    /**\n     * Enables bitmap creation before image load. This feature is experimental.\n     *\n     * @static\n     * @name CREATE_IMAGE_BITMAP\n     * @memberof PIXI.settings\n     * @type {boolean}\n     * @default false\n     */\n    CREATE_IMAGE_BITMAP: false,\n    /**\n     * If true PixiJS will Math.floor() x/y values when rendering, stopping pixel interpolation.\n     * Advantages can include sharper image quality (like text) and faster rendering on canvas.\n     * The main disadvantage is movement of objects may appear less smooth.\n     *\n     * @static\n     * @constant\n     * @memberof PIXI.settings\n     * @type {boolean}\n     * @default false\n     */\n    ROUND_PIXELS: false,\n};\n\nexport { isMobile, settings };\n//# sourceMappingURL=settings.js.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","/**\n * This file contains redeclared types for Node `url` and `querystring` modules. These modules\n * don't provide their own typings but instead are a part of the full Node typings. The purpose of\n * this file is to redeclare the required types to avoid having the whole Node types as a\n * dependency.\n */\n\nimport { parse as _parse, format as _format, resolve as _resolve } from 'url';\n\ninterface ParsedUrlQuery {\n    [key: string]: string | string[];\n}\n\ninterface ParsedUrlQueryInput {\n    [key: string]: unknown;\n}\n\ninterface UrlObjectCommon {\n    auth?: string;\n    hash?: string;\n    host?: string;\n    hostname?: string;\n    href?: string;\n    path?: string;\n    pathname?: string;\n    protocol?: string;\n    search?: string;\n    slashes?: boolean;\n}\n\n// Input to `url.format`\ninterface UrlObject extends UrlObjectCommon {\n    port?: string | number;\n    query?: string | null | ParsedUrlQueryInput;\n}\n\n// Output of `url.parse`\ninterface Url extends UrlObjectCommon {\n    port?: string;\n    query?: string | null | ParsedUrlQuery;\n}\n\ninterface UrlWithParsedQuery extends Url {\n    query: ParsedUrlQuery;\n}\n\ninterface UrlWithStringQuery extends Url {\n    query: string | null;\n}\n\ninterface URLFormatOptions {\n    auth?: boolean;\n    fragment?: boolean;\n    search?: boolean;\n    unicode?: boolean;\n}\n\ntype ParseFunction = {\n    (urlStr: string): UrlWithStringQuery;\n    (urlStr: string, parseQueryString: false | undefined, slashesDenoteHost?: boolean): UrlWithStringQuery;\n    (urlStr: string, parseQueryString: true, slashesDenoteHost?: boolean): UrlWithParsedQuery;\n    (urlStr: string, parseQueryString: boolean, slashesDenoteHost?: boolean): Url;\n};\n\ntype FormatFunction = {\n    (URL: URL, options?: URLFormatOptions): string;\n    (urlObject: UrlObject | string): string;\n};\n\ntype ResolveFunction = {\n    (from: string, to: string): string;\n};\n\nexport const url = {\n    parse: _parse as ParseFunction,\n    format: _format as FormatFunction,\n    resolve: _resolve as ResolveFunction,\n};\n","import { BLEND_MODES } from '@pixi/constants';\n\n/**\n * Corrects PixiJS blend, takes premultiplied alpha into account\n *\n * @memberof PIXI.utils\n * @function mapPremultipliedBlendModes\n * @private\n * @return {Array<number[]>} Mapped modes.\n */\nfunction mapPremultipliedBlendModes(): number[][]\n{\n    const pm = [];\n    const npm = [];\n\n    for (let i = 0; i < 32; i++)\n    {\n        pm[i] = i;\n        npm[i] = i;\n    }\n\n    pm[BLEND_MODES.NORMAL_NPM] = BLEND_MODES.NORMAL;\n    pm[BLEND_MODES.ADD_NPM] = BLEND_MODES.ADD;\n    pm[BLEND_MODES.SCREEN_NPM] = BLEND_MODES.SCREEN;\n\n    npm[BLEND_MODES.NORMAL] = BLEND_MODES.NORMAL_NPM;\n    npm[BLEND_MODES.ADD] = BLEND_MODES.ADD_NPM;\n    npm[BLEND_MODES.SCREEN] = BLEND_MODES.SCREEN_NPM;\n\n    const array: number[][] = [];\n\n    array.push(npm);\n    array.push(pm);\n\n    return array;\n}\n\n/**\n * maps premultiply flag and blendMode to adjusted blendMode\n * @memberof PIXI.utils\n * @const premultiplyBlendMode\n * @type {Array<number[]>}\n */\nexport const premultiplyBlendMode = mapPremultipliedBlendModes();\n\n/**\n * changes blendMode according to texture format\n *\n * @memberof PIXI.utils\n * @function correctBlendMode\n * @param {number} blendMode - supposed blend mode\n * @param {boolean} premultiplied - whether source is premultiplied\n * @returns {number} true blend mode for this texture\n */\nexport function correctBlendMode(blendMode: number, premultiplied: boolean): number\n{\n    return premultiplyBlendMode[premultiplied ? 1 : 0][blendMode];\n}\n\n/**\n * combines rgb and alpha to out array\n *\n * @memberof PIXI.utils\n * @function premultiplyRgba\n * @param {Float32Array|number[]} rgb - input rgb\n * @param {number} alpha - alpha param\n * @param {Float32Array} [out] - output\n * @param {boolean} [premultiply=true] - do premultiply it\n * @returns {Float32Array} vec4 rgba\n */\nexport function premultiplyRgba(\n    rgb: Float32Array|number[],\n    alpha: number,\n    out?: Float32Array,\n    premultiply?: boolean\n): Float32Array\n{\n    out = out || new Float32Array(4);\n    if (premultiply || premultiply === undefined)\n    {\n        out[0] = rgb[0] * alpha;\n        out[1] = rgb[1] * alpha;\n        out[2] = rgb[2] * alpha;\n    }\n    else\n    {\n        out[0] = rgb[0];\n        out[1] = rgb[1];\n        out[2] = rgb[2];\n    }\n    out[3] = alpha;\n\n    return out;\n}\n\n/**\n * premultiplies tint\n *\n * @memberof PIXI.utils\n * @function premultiplyTint\n * @param {number} tint - integer RGB\n * @param {number} alpha - floating point alpha (0.0-1.0)\n * @returns {number} tint multiplied by alpha\n */\nexport function premultiplyTint(tint: number, alpha: number): number\n{\n    if (alpha === 1.0)\n    {\n        return (alpha * 255 << 24) + tint;\n    }\n    if (alpha === 0.0)\n    {\n        return 0;\n    }\n    let R = ((tint >> 16) & 0xFF);\n    let G = ((tint >> 8) & 0xFF);\n    let B = (tint & 0xFF);\n\n    R = ((R * alpha) + 0.5) | 0;\n    G = ((G * alpha) + 0.5) | 0;\n    B = ((B * alpha) + 0.5) | 0;\n\n    return (alpha * 255 << 24) + (R << 16) + (G << 8) + B;\n}\n\n/**\n * converts integer tint and float alpha to vec4 form, premultiplies by default\n *\n * @memberof PIXI.utils\n * @function premultiplyTintToRgba\n * @param {number} tint - input tint\n * @param {number} alpha - alpha param\n * @param {Float32Array} [out] - output\n * @param {boolean} [premultiply=true] - do premultiply it\n * @returns {Float32Array} vec4 rgba\n */\nexport function premultiplyTintToRgba(tint: number, alpha: number, out: Float32Array, premultiply?: boolean): Float32Array\n{\n    out = out || new Float32Array(4);\n    out[0] = ((tint >> 16) & 0xFF) / 255.0;\n    out[1] = ((tint >> 8) & 0xFF) / 255.0;\n    out[2] = (tint & 0xFF) / 255.0;\n    if (premultiply || premultiply === undefined)\n    {\n        out[0] *= alpha;\n        out[1] *= alpha;\n        out[2] *= alpha;\n    }\n    out[3] = alpha;\n\n    return out;\n}\n","import { settings } from '@pixi/settings';\n\n/**\n * The prefix that denotes a URL is for a retina asset.\n *\n * @static\n * @name RETINA_PREFIX\n * @memberof PIXI.settings\n * @type {RegExp}\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nsettings.RETINA_PREFIX = /@([0-9\\.]+)x/;\n\n/**\n * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported` function.\n * If set to true, a WebGL renderer can fail to be created if the browser thinks there could be performance issues when\n * using WebGL.\n *\n * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many scenarios as possible.\n * However, some users may have a poor experience, for example, if a user has a gpu or driver version blacklisted by the\n * browser.\n *\n * If your application requires high performance rendering, you may wish to set this to false.\n * We recommend one of two options if you decide to set this flag to false:\n *\n * 1: Use the `pixi.js-legacy` package, which includes a Canvas renderer as a fallback in case high performance WebGL is\n *    not supported.\n *\n * 2: Call `isWebGLSupported` (which if found in the PIXI.utils package) in your code before attempting to create a PixiJS\n *    renderer, and show an error message to the user if the function returns false, explaining that their device & browser\n *    combination does not support high performance WebGL.\n *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n *\n * @static\n * @name FAIL_IF_MAJOR_PERFORMANCE_CAVEAT\n * @memberof PIXI.settings\n * @type {boolean}\n * @default false\n */\nsettings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT = false;\n\nexport { settings };\n","import { settings } from '@pixi/settings';\n\n/**\n * Creates a Canvas element of the given size to be used as a target for rendering to.\n *\n * @class\n * @memberof PIXI.utils\n */\nexport class CanvasRenderTarget\n{\n    /** The Canvas object that belongs to this CanvasRenderTarget. */\n    public canvas: HTMLCanvasElement;\n\n    /** A CanvasRenderingContext2D object representing a two-dimensional rendering context. */\n    public context: CanvasRenderingContext2D;\n\n    /**\n     * The resolution / device pixel ratio of the canvas\n     * @default 1\n     */\n    public resolution: number;\n\n    /**\n     * @param width - the width for the newly created canvas\n     * @param height - the height for the newly created canvas\n     * @param {number} [resolution=1] - The resolution / device pixel ratio of the canvas\n     */\n    constructor(width: number, height: number, resolution?: number)\n    {\n        this.canvas = document.createElement('canvas');\n\n        this.context = this.canvas.getContext('2d');\n\n        this.resolution = resolution || settings.RESOLUTION;\n\n        this.resize(width, height);\n    }\n\n    /**\n     * Clears the canvas that was created by the CanvasRenderTarget class.\n     *\n     * @private\n     */\n    clear(): void\n    {\n        this.context.setTransform(1, 0, 0, 1, 0, 0);\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);\n    }\n\n    /**\n     * Resizes the canvas to the specified width and height.\n     *\n     * @param width - the new width of the canvas\n     * @param height - the new height of the canvas\n     */\n    resize(width: number, height: number): void\n    {\n        this.canvas.width = width * this.resolution;\n        this.canvas.height = height * this.resolution;\n    }\n\n    /** Destroys this canvas. */\n    destroy(): void\n    {\n        this.context = null;\n        this.canvas = null;\n    }\n\n    /**\n     * The width of the canvas buffer in pixels.\n     *\n     * @member {number}\n     */\n    get width(): number\n    {\n        return this.canvas.width;\n    }\n\n    set width(val: number)\n    {\n        this.canvas.width = val;\n    }\n\n    /**\n     * The height of the canvas buffer in pixels.\n     *\n     * @member {number}\n     */\n    get height(): number\n    {\n        return this.canvas.height;\n    }\n\n    set height(val: number)\n    {\n        this.canvas.height = val;\n    }\n}\n","import { LoaderResource } from '@pixi/loaders';\nimport { url } from '@pixi/utils';\n\nimport type { Loader, ILoaderResource } from '@pixi/loaders';\nimport type { INTERNAL_FORMATS } from '../const';\n\n/**\n * Schema for compressed-texture manifests\n *\n * @ignore\n * @see PIXI.CompressedTextureLoader\n */\nexport type CompressedTextureManifest = {\n    textures: Array<{ src: string, format?: keyof INTERNAL_FORMATS}>,\n    cacheID: string;\n};\n\n// Missing typings? - https://github.com/microsoft/TypeScript/issues/39655\n/**\n * Compressed texture extensions\n */\n/* eslint-disable camelcase */\nexport type CompressedTextureExtensions = {\n    s3tc?: WEBGL_compressed_texture_s3tc,\n    s3tc_sRGB: WEBGL_compressed_texture_s3tc_srgb,\n    etc: any,\n    etc1: any,\n    pvrtc: any,\n    atc: any,\n    astc: WEBGL_compressed_texture_astc\n};\nexport type CompressedTextureExtensionRef = keyof CompressedTextureExtensions;\n/* eslint-enable camelcase */\n\n/**\n * Loader plugin for handling compressed textures for all platforms.\n *\n * @class\n * @memberof PIXI\n * @implements PIXI.ILoaderPlugin\n */\nexport class CompressedTextureLoader\n{\n    /**\n     * Map of available texture extensions.\n     */\n    static textureExtensions: Partial<CompressedTextureExtensions>;\n\n    /**\n     * Map of available texture formats.\n     */\n    static textureFormats: { [P in keyof INTERNAL_FORMATS]?: number };\n\n    /**\n     * Called after a compressed-textures manifest is loaded.\n     *\n     * This will then load the correct compression format for the device. Your manifest should adhere\n     * to the following schema:\n     *\n     * ```js\n     * import { INTERNAL_FORMATS } from '@pixi/constants';\n     *\n     * // The following should be present in a *.compressed-texture.json file!\n     * const manifest = JSON.stringify({\n     *   COMPRESSED_RGBA_S3TC_DXT5_EXT: \"asset.s3tc.ktx\",\n     *   COMPRESSED_RGBA8_ETC2_EAC: \"asset.etc.ktx\",\n     *   RGBA_PVRTC_4BPPV1_IMG: \"asset.pvrtc.ktx\",\n     *   textureID: \"asset.png\",\n     *   fallback: \"asset.png\"\n     * });\n     * ```\n     */\n    static use(resource: ILoaderResource, next: (...args: any[]) => void): void\n    {\n        const data: CompressedTextureManifest = resource.data;\n        const loader = this as unknown as Loader;\n\n        if (resource.type === LoaderResource.TYPE.JSON\n            && data\n            && data.cacheID\n            && data.textures)\n        {\n            const textures = data.textures;\n\n            let textureURL: string;\n            let fallbackURL: string;\n\n            // Search for an extension that holds one the formats\n            for (let i = 0, j = textures.length; i < j; i++)\n            {\n                const texture = textures[i];\n                const url = texture.src;\n                const format = texture.format;\n\n                if (!format)\n                {\n                    fallbackURL = url;\n                }\n                if (CompressedTextureLoader.textureFormats[format])\n                {\n                    textureURL = url;\n                    break;\n                }\n            }\n\n            textureURL = textureURL || fallbackURL;\n\n            // Make sure we have a URL\n            if (!textureURL)\n            {\n                next(new Error(`Cannot load compressed-textures in ${resource.url}, make sure you provide a fallback`));\n\n                return;\n            }\n            if (textureURL === resource.url)\n            {\n                // Prevent infinite loops\n                next(new Error('URL of compressed texture cannot be the same as the manifest\\'s URL'));\n\n                return;\n            }\n\n            const loadOptions = {\n                crossOrigin: resource.crossOrigin,\n                metadata: resource.metadata.imageMetadata,\n                parentResource: resource\n            };\n\n            const resourcePath = url.resolve(resource.url.replace(loader.baseUrl, ''), textureURL);\n            const resourceName = data.cacheID;\n\n            // The appropriate loader should register the texture\n            loader.add(resourceName, resourcePath, loadOptions, (res: ILoaderResource) =>\n            {\n                if (res.error)\n                {\n                    next(res.error);\n\n                    return;\n                }\n\n                const { texture = null, textures = {} } = res;\n\n                // Make sure texture/textures is assigned to parent resource\n                Object.assign(resource, { texture, textures });\n\n                // Pass along any error\n                next();\n            });\n        }\n        else\n        {\n            next();\n        }\n    }\n\n    /**\n     * Detects the available compressed texture extensions on the device.\n     *\n     * @ignore\n     */\n    static add(): void\n    {\n        // Auto-detect WebGL compressed-texture extensions\n        const canvas = document.createElement('canvas');\n        const gl = canvas.getContext('webgl');\n\n        if (!gl)\n        {\n            // #if _DEBUG\n            console.error('WebGL not available for compressed textures. Silently failing.');\n            // #endif\n\n            return;\n        }\n\n        const extensions = {\n            s3tc: gl.getExtension('WEBGL_compressed_texture_s3tc'),\n            s3tc_sRGB: gl.getExtension('WEBGL_compressed_texture_s3tc_srgb'), /* eslint-disable-line camelcase */\n            etc: gl.getExtension('WEBGL_compressed_texture_etc'),\n            etc1: gl.getExtension('WEBGL_compressed_texture_etc1'),\n            pvrtc: gl.getExtension('WEBGL_compressed_texture_pvrtc')\n                || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc'),\n            atc: gl.getExtension('WEBGL_compressed_texture_atc'),\n            astc: gl.getExtension('WEBGL_compressed_texture_astc')\n        };\n\n        CompressedTextureLoader.textureExtensions = extensions;\n        CompressedTextureLoader.textureFormats = {};\n\n        // Assign all available compressed-texture formats\n        for (const extensionName in extensions)\n        {\n            const extension = extensions[extensionName as CompressedTextureExtensionRef];\n\n            if (!extension)\n            {\n                continue;\n            }\n\n            Object.assign(\n                CompressedTextureLoader.textureFormats,\n                Object.getPrototypeOf(extension));\n        }\n    }\n}\n","import { MIPMAP_MODES, ALPHA_MODES } from '@pixi/constants';\nimport { BaseTexture, Texture } from '@pixi/core';\n\nimport type { ILoaderResource, IResourceMetadata } from '@pixi/loaders';\nimport type { CompressedTextureResource } from '../resources/CompressedTextureResource';\n\n/**\n * Result when calling registerCompressedTextures.\n * @ignore\n */\ntype CompressedTexturesResult = Pick<ILoaderResource, 'textures' | 'texture'>;\n\n/**\n * Creates base-textures and textures for each compressed-texture resource and adds them into the global\n * texture cache. The first texture has two IDs - `${url}`, `${url}-1`; while the rest have an ID of the\n * form `${url}-i`.\n *\n * @param url - the original address of the resources\n * @param resources - the resources backing texture data\n * @ignore\n */\nexport function registerCompressedTextures(url: string,\n    resources: CompressedTextureResource[],\n    metadata: IResourceMetadata): CompressedTexturesResult\n{\n    const result: CompressedTexturesResult = {\n        textures: {},\n        texture: null,\n    };\n\n    if (!resources)\n    {\n        return result;\n    }\n\n    const textures = resources.map((resource) =>\n        (\n            new Texture(new BaseTexture(resource, Object.assign({\n                mipmap: MIPMAP_MODES.OFF,\n                alphaMode: ALPHA_MODES.NO_PREMULTIPLIED_ALPHA\n            }, metadata)))\n        ));\n\n    textures.forEach((texture, i) =>\n    {\n        const { baseTexture } = texture;\n        const cacheID = `${url}-${i + 1}`;\n\n        BaseTexture.addToCache(baseTexture, cacheID);\n        Texture.addToCache(texture, cacheID);\n\n        if (i === 0)\n        {\n            BaseTexture.addToCache(baseTexture, url);\n            Texture.addToCache(texture, url);\n            result.texture = texture;\n        }\n\n        result.textures[cacheID] = texture;\n    });\n\n    return result;\n}\n","import { CompressedTextureResource } from '../resources';\nimport { INTERNAL_FORMATS, INTERNAL_FORMAT_TO_BYTES_PER_PIXEL } from '../const';\nimport { LoaderResource } from '@pixi/loaders';\nimport { registerCompressedTextures } from './registerCompressedTextures';\n\nimport type { ILoaderResource } from '@pixi/loaders';\n\n// Set DDS files to be loaded as an ArrayBuffer\nLoaderResource.setExtensionXhrType('dds', LoaderResource.XHR_RESPONSE_TYPE.BUFFER);\n\nconst DDS_MAGIC_SIZE = 4;\nconst DDS_HEADER_SIZE = 124;\nconst DDS_HEADER_PF_SIZE = 32;\nconst DDS_HEADER_DX10_SIZE = 20;\n\n// DDS file format magic word\nconst DDS_MAGIC = 0x20534444;\n\n/**\n * DWORD offsets of the DDS file header fields (relative to file start).\n *\n * @ignore\n */\nconst DDS_FIELDS = {\n    SIZE: 1,\n    FLAGS: 2,\n    HEIGHT: 3,\n    WIDTH: 4,\n    MIPMAP_COUNT: 7,\n    PIXEL_FORMAT: 19,\n};\n\n/**\n * DWORD offsets of the DDS PIXEL_FORMAT fields.\n *\n * @ignore\n */\nconst DDS_PF_FIELDS = {\n    SIZE: 0,\n    FLAGS: 1,\n    FOURCC: 2,\n    RGB_BITCOUNT: 3,\n    R_BIT_MASK: 4,\n    G_BIT_MASK: 5,\n    B_BIT_MASK: 6,\n    A_BIT_MASK: 7\n};\n\n/**\n * DWORD offsets of the DDS_HEADER_DX10 fields.\n *\n * @ignore\n */\nconst DDS_DX10_FIELDS = {\n    DXGI_FORMAT: 0,\n    RESOURCE_DIMENSION: 1,\n    MISC_FLAG: 2,\n    ARRAY_SIZE: 3,\n    MISC_FLAGS2: 4\n};\n\n/**\n * @see https://docs.microsoft.com/en-us/windows/win32/api/dxgiformat/ne-dxgiformat-dxgi_format\n * @ignore\n */\n// This is way over-blown for us! Lend us a hand, and remove the ones that aren't used (but set the remaining\n// ones to their correct value)\nenum DXGI_FORMAT {\n    DXGI_FORMAT_UNKNOWN,\n    DXGI_FORMAT_R32G32B32A32_TYPELESS,\n    DXGI_FORMAT_R32G32B32A32_FLOAT,\n    DXGI_FORMAT_R32G32B32A32_UINT,\n    DXGI_FORMAT_R32G32B32A32_SINT,\n    DXGI_FORMAT_R32G32B32_TYPELESS,\n    DXGI_FORMAT_R32G32B32_FLOAT,\n    DXGI_FORMAT_R32G32B32_UINT,\n    DXGI_FORMAT_R32G32B32_SINT,\n    DXGI_FORMAT_R16G16B16A16_TYPELESS,\n    DXGI_FORMAT_R16G16B16A16_FLOAT,\n    DXGI_FORMAT_R16G16B16A16_UNORM,\n    DXGI_FORMAT_R16G16B16A16_UINT,\n    DXGI_FORMAT_R16G16B16A16_SNORM,\n    DXGI_FORMAT_R16G16B16A16_SINT,\n    DXGI_FORMAT_R32G32_TYPELESS,\n    DXGI_FORMAT_R32G32_FLOAT,\n    DXGI_FORMAT_R32G32_UINT,\n    DXGI_FORMAT_R32G32_SINT,\n    DXGI_FORMAT_R32G8X24_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT_S8X24_UINT,\n    DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS,\n    DXGI_FORMAT_X32_TYPELESS_G8X24_UINT,\n    DXGI_FORMAT_R10G10B10A2_TYPELESS,\n    DXGI_FORMAT_R10G10B10A2_UNORM,\n    DXGI_FORMAT_R10G10B10A2_UINT,\n    DXGI_FORMAT_R11G11B10_FLOAT,\n    DXGI_FORMAT_R8G8B8A8_TYPELESS,\n    DXGI_FORMAT_R8G8B8A8_UNORM,\n    DXGI_FORMAT_R8G8B8A8_UNORM_SRGB,\n    DXGI_FORMAT_R8G8B8A8_UINT,\n    DXGI_FORMAT_R8G8B8A8_SNORM,\n    DXGI_FORMAT_R8G8B8A8_SINT,\n    DXGI_FORMAT_R16G16_TYPELESS,\n    DXGI_FORMAT_R16G16_FLOAT,\n    DXGI_FORMAT_R16G16_UNORM,\n    DXGI_FORMAT_R16G16_UINT,\n    DXGI_FORMAT_R16G16_SNORM,\n    DXGI_FORMAT_R16G16_SINT,\n    DXGI_FORMAT_R32_TYPELESS,\n    DXGI_FORMAT_D32_FLOAT,\n    DXGI_FORMAT_R32_FLOAT,\n    DXGI_FORMAT_R32_UINT,\n    DXGI_FORMAT_R32_SINT,\n    DXGI_FORMAT_R24G8_TYPELESS,\n    DXGI_FORMAT_D24_UNORM_S8_UINT,\n    DXGI_FORMAT_R24_UNORM_X8_TYPELESS,\n    DXGI_FORMAT_X24_TYPELESS_G8_UINT,\n    DXGI_FORMAT_R8G8_TYPELESS,\n    DXGI_FORMAT_R8G8_UNORM,\n    DXGI_FORMAT_R8G8_UINT,\n    DXGI_FORMAT_R8G8_SNORM,\n    DXGI_FORMAT_R8G8_SINT,\n    DXGI_FORMAT_R16_TYPELESS,\n    DXGI_FORMAT_R16_FLOAT,\n    DXGI_FORMAT_D16_UNORM,\n    DXGI_FORMAT_R16_UNORM,\n    DXGI_FORMAT_R16_UINT,\n    DXGI_FORMAT_R16_SNORM,\n    DXGI_FORMAT_R16_SINT,\n    DXGI_FORMAT_R8_TYPELESS,\n    DXGI_FORMAT_R8_UNORM,\n    DXGI_FORMAT_R8_UINT,\n    DXGI_FORMAT_R8_SNORM,\n    DXGI_FORMAT_R8_SINT,\n    DXGI_FORMAT_A8_UNORM,\n    DXGI_FORMAT_R1_UNORM,\n    DXGI_FORMAT_R9G9B9E5_SHAREDEXP,\n    DXGI_FORMAT_R8G8_B8G8_UNORM,\n    DXGI_FORMAT_G8R8_G8B8_UNORM,\n    DXGI_FORMAT_BC1_TYPELESS,\n    DXGI_FORMAT_BC1_UNORM,\n    DXGI_FORMAT_BC1_UNORM_SRGB,\n    DXGI_FORMAT_BC2_TYPELESS,\n    DXGI_FORMAT_BC2_UNORM,\n    DXGI_FORMAT_BC2_UNORM_SRGB,\n    DXGI_FORMAT_BC3_TYPELESS,\n    DXGI_FORMAT_BC3_UNORM,\n    DXGI_FORMAT_BC3_UNORM_SRGB,\n    DXGI_FORMAT_BC4_TYPELESS,\n    DXGI_FORMAT_BC4_UNORM,\n    DXGI_FORMAT_BC4_SNORM,\n    DXGI_FORMAT_BC5_TYPELESS,\n    DXGI_FORMAT_BC5_UNORM,\n    DXGI_FORMAT_BC5_SNORM,\n    DXGI_FORMAT_B5G6R5_UNORM,\n    DXGI_FORMAT_B5G5R5A1_UNORM,\n    DXGI_FORMAT_B8G8R8A8_UNORM,\n    DXGI_FORMAT_B8G8R8X8_UNORM,\n    DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM,\n    DXGI_FORMAT_B8G8R8A8_TYPELESS,\n    DXGI_FORMAT_B8G8R8A8_UNORM_SRGB,\n    DXGI_FORMAT_B8G8R8X8_TYPELESS,\n    DXGI_FORMAT_B8G8R8X8_UNORM_SRGB,\n    DXGI_FORMAT_BC6H_TYPELESS,\n    DXGI_FORMAT_BC6H_UF16,\n    DXGI_FORMAT_BC6H_SF16,\n    DXGI_FORMAT_BC7_TYPELESS,\n    DXGI_FORMAT_BC7_UNORM,\n    DXGI_FORMAT_BC7_UNORM_SRGB,\n    DXGI_FORMAT_AYUV,\n    DXGI_FORMAT_Y410,\n    DXGI_FORMAT_Y416,\n    DXGI_FORMAT_NV12,\n    DXGI_FORMAT_P010,\n    DXGI_FORMAT_P016,\n    DXGI_FORMAT_420_OPAQUE,\n    DXGI_FORMAT_YUY2,\n    DXGI_FORMAT_Y210,\n    DXGI_FORMAT_Y216,\n    DXGI_FORMAT_NV11,\n    DXGI_FORMAT_AI44,\n    DXGI_FORMAT_IA44,\n    DXGI_FORMAT_P8,\n    DXGI_FORMAT_A8P8,\n    DXGI_FORMAT_B4G4R4A4_UNORM,\n    DXGI_FORMAT_P208,\n    DXGI_FORMAT_V208,\n    DXGI_FORMAT_V408,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE,\n    DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE,\n    DXGI_FORMAT_FORCE_UINT\n}\n\n/**\n * Possible values of the field {@link DDS_DX10_FIELDS.RESOURCE_DIMENSION}\n *\n * @ignore\n */\nenum D3D10_RESOURCE_DIMENSION {\n    DDS_DIMENSION_TEXTURE1D = 2,\n    DDS_DIMENSION_TEXTURE2D = 3,\n    DDS_DIMENSION_TEXTURE3D = 6\n}\n\nconst PF_FLAGS = 1;\n\n// PIXEL_FORMAT flags\nconst DDPF_ALPHA = 0x2;\nconst DDPF_FOURCC = 0x4;\nconst DDPF_RGB = 0x40;\nconst DDPF_YUV = 0x200;\nconst DDPF_LUMINANCE = 0x20000;\n\n// Four character codes for DXTn formats\nconst FOURCC_DXT1 = 0x31545844;\nconst FOURCC_DXT3 = 0x33545844;\nconst FOURCC_DXT5 = 0x35545844;\nconst FOURCC_DX10 = 0x30315844;\n\n// Cubemap texture flag (for DDS_DX10_FIELDS.MISC_FLAG)\nconst DDS_RESOURCE_MISC_TEXTURECUBE = 0x4;\n\n/**\n * Maps `FOURCC_*` formats to internal formats (see {@link PIXI.INTERNAL_FORMATS}).\n *\n * @ignore\n */\nconst FOURCC_TO_FORMAT: { [id: number]: number } = {\n    [FOURCC_DXT1]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n    [FOURCC_DXT3]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n    [FOURCC_DXT5]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT\n};\n\n/**\n * Maps {@link DXGI_FORMAT} to types/internal-formats (see {@link PIXI.TYPES}, {@link PIXI.INTERNAL_FORMATS})\n *\n * @ignore\n */\nconst DXGI_TO_FORMAT: { [id: number]: number } = {\n    // WEBGL_compressed_texture_s3tc\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_TYPELESS]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_TYPELESS]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_TYPELESS]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM]: INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,\n\n    // WEBGL_compressed_texture_s3tc_srgb\n    [DXGI_FORMAT.DXGI_FORMAT_BC1_UNORM_SRGB]: INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC2_UNORM_SRGB]: INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n    [DXGI_FORMAT.DXGI_FORMAT_BC3_UNORM_SRGB]: INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\n};\n\n/**\n * @class\n * @memberof PIXI\n * @implements PIXI.ILoaderPlugin\n * @see https://docs.microsoft.com/en-us/windows/win32/direct3ddds/dx-graphics-dds-pguide\n */\nexport class DDSLoader\n{\n    public static use(resource: ILoaderResource, next: (...args: any[]) => void): void\n    {\n        if (resource.extension === 'dds' && resource.data)\n        {\n            try\n            {\n                Object.assign(resource, registerCompressedTextures(\n                    resource.name || resource.url,\n                    DDSLoader.parse(resource.data),\n                    resource.metadata,\n                ));\n            }\n            catch (err)\n            {\n                next(err);\n\n                return;\n            }\n        }\n\n        next();\n    }\n\n    /**\n     * Parses the DDS file header, generates base-textures, and puts them into the texture\n     * cache.\n     */\n    private static parse(arrayBuffer: ArrayBuffer): CompressedTextureResource[]\n    {\n        const data = new Uint32Array(arrayBuffer);\n        const magicWord = data[0];\n\n        if (magicWord !== DDS_MAGIC)\n        {\n            throw new Error('Invalid DDS file magic word');\n        }\n\n        const header = new Uint32Array(arrayBuffer, 0, DDS_HEADER_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n\n        // DDS header fields\n        const height = header[DDS_FIELDS.HEIGHT];\n        const width = header[DDS_FIELDS.WIDTH];\n        const mipmapCount = header[DDS_FIELDS.MIPMAP_COUNT];\n\n        // PIXEL_FORMAT fields\n        const pixelFormat = new Uint32Array(\n            arrayBuffer,\n            DDS_FIELDS.PIXEL_FORMAT * Uint32Array.BYTES_PER_ELEMENT,\n            DDS_HEADER_PF_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n        const formatFlags = pixelFormat[PF_FLAGS];\n\n        // File contains compressed texture(s)\n        if (formatFlags & DDPF_FOURCC)\n        {\n            const fourCC = pixelFormat[DDS_PF_FIELDS.FOURCC];\n\n            // File contains one DXTn compressed texture\n            if (fourCC !== FOURCC_DX10)\n            {\n                const internalFormat = FOURCC_TO_FORMAT[fourCC];\n\n                const dataOffset = DDS_MAGIC_SIZE + DDS_HEADER_SIZE;\n                const texData = new Uint8Array(arrayBuffer, dataOffset);\n\n                const resource = new CompressedTextureResource(texData, {\n                    format: internalFormat,\n                    width,\n                    height,\n                    levels: mipmapCount // CompressedTextureResource will separate the levelBuffers for us!\n                });\n\n                return [resource];\n            }\n\n            // FOURCC_DX10 indicates there is a 20-byte DDS_HEADER_DX10 after DDS_HEADER\n            const dx10Offset = DDS_MAGIC_SIZE + DDS_HEADER_SIZE;\n            const dx10Header = new Uint32Array(\n                data.buffer,\n                dx10Offset,\n                DDS_HEADER_DX10_SIZE / Uint32Array.BYTES_PER_ELEMENT);\n            const dxgiFormat = dx10Header[DDS_DX10_FIELDS.DXGI_FORMAT];\n            const resourceDimension = dx10Header[DDS_DX10_FIELDS.RESOURCE_DIMENSION];\n            const miscFlag = dx10Header[DDS_DX10_FIELDS.MISC_FLAG];\n            const arraySize = dx10Header[DDS_DX10_FIELDS.ARRAY_SIZE];\n\n            // Map dxgiFormat to PIXI.INTERNAL_FORMATS\n            const internalFormat = DXGI_TO_FORMAT[dxgiFormat];\n\n            if (internalFormat === undefined)\n            {\n                throw new Error(`DDSLoader cannot parse texture data with DXGI format ${dxgiFormat}`);\n            }\n            if (miscFlag === DDS_RESOURCE_MISC_TEXTURECUBE)\n            {\n                // FIXME: Anybody excited about cubemap compressed textures?\n                throw new Error('DDSLoader does not support cubemap textures');\n            }\n            if (resourceDimension === D3D10_RESOURCE_DIMENSION.DDS_DIMENSION_TEXTURE3D)\n            {\n                // FIXME: Anybody excited about 3D compressed textures?\n                throw new Error('DDSLoader does not supported 3D texture data');\n            }\n\n            // Uint8Array buffers of image data, including all mipmap levels in each image\n            const imageBuffers = new Array<Uint8Array>();\n            const dataOffset = DDS_MAGIC_SIZE\n                + DDS_HEADER_SIZE\n                + DDS_HEADER_DX10_SIZE;\n\n            if (arraySize === 1)\n            {\n                // No need bothering with the imageSize calculation!\n                imageBuffers.push(new Uint8Array(arrayBuffer, dataOffset));\n            }\n            else\n            {\n                // Calculate imageSize for each texture, and then locate each image's texture data\n\n                const pixelSize = INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[internalFormat];\n                let imageSize = 0;\n                let levelWidth = width;\n                let levelHeight = height;\n\n                for (let i = 0; i < mipmapCount; i++)\n                {\n                    const alignedLevelWidth = Math.max(1, (levelWidth + 3) & ~3);\n                    const alignedLevelHeight = Math.max(1, (levelHeight + 3) & ~3);\n\n                    const levelSize = alignedLevelWidth * alignedLevelHeight * pixelSize;\n\n                    imageSize += levelSize;\n\n                    levelWidth = levelWidth >>> 1;\n                    levelHeight = levelHeight >>> 1;\n                }\n\n                let imageOffset = dataOffset;\n\n                // NOTE: Cubemaps have 6-images per texture (but they aren't supported so ^_^)\n                for (let i = 0; i < arraySize; i++)\n                {\n                    imageBuffers.push(new Uint8Array(arrayBuffer, imageOffset, imageSize));\n                    imageOffset += imageSize;\n                }\n            }\n\n            // Uint8Array -> CompressedTextureResource, and we're done!\n            return imageBuffers.map((buffer) => new CompressedTextureResource(buffer, {\n                format: internalFormat,\n                width,\n                height,\n                levels: mipmapCount\n            }));\n        }\n        if (formatFlags & DDPF_RGB)\n        {\n            // FIXME: We might want to allow uncompressed *.dds files?\n            throw new Error('DDSLoader does not support uncompressed texture data.');\n        }\n        if (formatFlags & DDPF_YUV)\n        {\n            // FIXME: Does anybody need this feature?\n            throw new Error('DDSLoader does not supported YUV uncompressed texture data.');\n        }\n        if (formatFlags & DDPF_LUMINANCE)\n        {\n            // FIXME: Microsoft says older DDS filers use this feature! Probably not worth the effort!\n            throw new Error('DDSLoader does not support single-channel (lumninance) texture data!');\n        }\n        if (formatFlags & DDPF_ALPHA)\n        {\n            // FIXME: I'm tired! See above =)\n            throw new Error('DDSLoader does not support single-channel (alpha) texture data!');\n        }\n\n        throw new Error('DDSLoader failed to load a texture file due to an unknown reason!');\n    }\n}\n","import { TYPES, FORMATS } from '@pixi/constants';\nimport { INTERNAL_FORMAT_TO_BYTES_PER_PIXEL } from '../const';\nimport { CompressedTextureResource, CompressedLevelBuffer } from '../resources/CompressedTextureResource';\nimport { LoaderResource } from '@pixi/loaders';\nimport { registerCompressedTextures } from './registerCompressedTextures';\n\nimport type { ILoaderResource } from '@pixi/loaders';\n\n// Set KTX files to be loaded as an ArrayBuffer\nLoaderResource.setExtensionXhrType('ktx', LoaderResource.XHR_RESPONSE_TYPE.BUFFER);\n\n/**\n * The 12-byte KTX file identifier\n *\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.1\n * @ignore\n */\nconst FILE_IDENTIFIER = [0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A];\n\n/**\n * The value stored in the \"endianness\" field.\n *\n * @see https://www.khronos.org/opengles/sdk/tools/KTX/file_format_spec/#2.2\n * @ignore\n */\nconst ENDIANNESS = 0x04030201;\n\n/**\n * Byte offsets of the KTX file header fields\n *\n * @ignore\n */\nconst KTX_FIELDS = {\n    FILE_IDENTIFIER: 0,\n    ENDIANNESS: 12,\n    GL_TYPE: 16,\n    GL_TYPE_SIZE: 20,\n    GL_FORMAT: 24,\n    GL_INTERNAL_FORMAT: 28,\n    GL_BASE_INTERNAL_FORMAT: 32,\n    PIXEL_WIDTH: 36,\n    PIXEL_HEIGHT: 40,\n    PIXEL_DEPTH: 44,\n    NUMBER_OF_ARRAY_ELEMENTS: 48,\n    NUMBER_OF_FACES: 52,\n    NUMBER_OF_MIPMAP_LEVELS: 56,\n    BYTES_OF_KEY_VALUE_DATA: 60\n};\n\n/**\n * Byte size of the file header fields in {@code KTX_FIELDS}\n *\n * @ignore\n */\nconst FILE_HEADER_SIZE = 64;\n\n/**\n * Maps {@link PIXI.TYPES} to the bytes taken per component, excluding those ones that are bit-fields.\n *\n * @ignore\n */\nexport const TYPES_TO_BYTES_PER_COMPONENT: { [id: number]: number } = {\n    [TYPES.UNSIGNED_BYTE]: 1,\n    [TYPES.UNSIGNED_SHORT]: 2,\n    [TYPES.FLOAT]: 4,\n    [TYPES.HALF_FLOAT]: 8\n};\n\n/**\n * Number of components in each {@link PIXI.FORMATS}\n *\n * @ignore\n */\nexport const FORMATS_TO_COMPONENTS: { [id: number]: number } = {\n    [FORMATS.RGBA]: 4,\n    [FORMATS.RGB]: 3,\n    [FORMATS.LUMINANCE]: 1,\n    [FORMATS.LUMINANCE_ALPHA]: 2,\n    [FORMATS.ALPHA]: 1\n};\n\n/**\n * Number of bytes per pixel in bit-field types in {@link PIXI.TYPES}\n *\n * @ignore\n */\nexport const TYPES_TO_BYTES_PER_PIXEL: { [id: number]: number } = {\n    [TYPES.UNSIGNED_SHORT_4_4_4_4]: 2,\n    [TYPES.UNSIGNED_SHORT_5_5_5_1]: 2,\n    [TYPES.UNSIGNED_SHORT_5_6_5]: 2\n};\n\n/**\n * Loader plugin for handling KTX texture container files.\n *\n * This KTX loader does not currently support the following features:\n * * cube textures\n * * 3D textures\n * * vendor-specific key/value data parsing\n * * endianness conversion for big-endian machines\n * * embedded *.basis files\n *\n * It does supports the following features:\n * * multiple textures per file\n * * mipmapping\n *\n * @class\n * @memberof PIXI\n * @implements PIXI.ILoaderPlugin\n */\nexport class KTXLoader\n{\n    /**\n     * Called after a KTX file is loaded.\n     *\n     * This will parse the KTX file header and add a {@code BaseTexture} to the texture\n     * cache.\n     *\n     * @see PIXI.Loader.loaderMiddleware\n     * @param {PIXI.LoaderResource} resource\n     * @param {function} next\n     */\n    public static use(resource: ILoaderResource, next: (...args: any[]) => void): void\n    {\n        if (resource.extension === 'ktx' && resource.data)\n        {\n            try\n            {\n                const url = resource.name || resource.url;\n\n                Object.assign(resource, registerCompressedTextures(\n                    url,\n                    KTXLoader.parse(url, resource.data),\n                    resource.metadata,\n                ));\n            }\n            catch (err)\n            {\n                next(err);\n\n                return;\n            }\n        }\n\n        next();\n    }\n\n    /**\n     * Parses the KTX file header, generates base-textures, and puts them into the texture\n     * cache.\n     */\n    private static parse(url: string, arrayBuffer: ArrayBuffer): CompressedTextureResource[] | null\n    {\n        const dataView = new DataView(arrayBuffer);\n\n        if (!KTXLoader.validate(url, dataView))\n        {\n            return null;\n        }\n\n        const littleEndian = dataView.getUint32(KTX_FIELDS.ENDIANNESS, true) === ENDIANNESS;\n        const glType = dataView.getUint32(KTX_FIELDS.GL_TYPE, littleEndian);\n        // const glTypeSize = dataView.getUint32(KTX_FIELDS.GL_TYPE_SIZE, littleEndian);\n        const glFormat = dataView.getUint32(KTX_FIELDS.GL_FORMAT, littleEndian);\n        const glInternalFormat = dataView.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT, littleEndian);\n        const pixelWidth = dataView.getUint32(KTX_FIELDS.PIXEL_WIDTH, littleEndian);\n        const pixelHeight = dataView.getUint32(KTX_FIELDS.PIXEL_HEIGHT, littleEndian) || 1;// \"pixelHeight = 0\" -> \"1\"\n        const pixelDepth = dataView.getUint32(KTX_FIELDS.PIXEL_DEPTH, littleEndian) || 1;// ^^\n        const numberOfArrayElements = dataView.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS, littleEndian) || 1;// ^^\n        const numberOfFaces = dataView.getUint32(KTX_FIELDS.NUMBER_OF_FACES, littleEndian);\n        const numberOfMipmapLevels = dataView.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS, littleEndian);\n        const bytesOfKeyValueData = dataView.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA, littleEndian);\n\n        // Whether the platform architecture is little endian. If littleEndian !== platformLittleEndian, then the\n        // file contents must be endian-converted!\n        // TODO: Endianness conversion\n        // const platformLittleEndian = new Uint8Array((new Uint32Array([ENDIANNESS])).buffer)[0] === 0x01;\n\n        if (pixelHeight === 0 || pixelDepth !== 1)\n        {\n            throw new Error('Only 2D textures are supported');\n        }\n        if (numberOfFaces !== 1)\n        {\n            throw new Error('CubeTextures are not supported by KTXLoader yet!');\n        }\n        if (numberOfArrayElements !== 1)\n        {\n            // TODO: Support splitting array-textures into multiple BaseTextures\n            throw new Error('WebGL does not support array textures');\n        }\n\n        // TODO: 8x4 blocks for 2bpp pvrtc\n        const blockWidth = 4;\n        const blockHeight = 4;\n\n        const alignedWidth = (pixelWidth + 3) & ~3;\n        const alignedHeight = (pixelHeight + 3) & ~3;\n        const imageBuffers = new Array<CompressedLevelBuffer[]>(numberOfArrayElements);\n        let imagePixels = pixelWidth * pixelHeight;\n\n        if (glType === 0)\n        {\n            // Align to 16 pixels (4x4 blocks)\n            imagePixels = alignedWidth * alignedHeight;\n        }\n\n        let imagePixelByteSize: number;\n\n        if (glType !== 0)\n        {\n            // Uncompressed texture format\n            if (TYPES_TO_BYTES_PER_COMPONENT[glType])\n            {\n                imagePixelByteSize = TYPES_TO_BYTES_PER_COMPONENT[glType] * FORMATS_TO_COMPONENTS[glFormat];\n            }\n            else\n            {\n                imagePixelByteSize = TYPES_TO_BYTES_PER_PIXEL[glType];\n            }\n        }\n        else\n        {\n            imagePixelByteSize = INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[glInternalFormat];\n        }\n\n        if (imagePixelByteSize === undefined)\n        {\n            throw new Error('Unable to resolve the pixel format stored in the *.ktx file!');\n        }\n\n        const imageByteSize = imagePixels * imagePixelByteSize;\n        let mipByteSize = imageByteSize;\n        let mipWidth = pixelWidth;\n        let mipHeight = pixelHeight;\n        let alignedMipWidth = alignedWidth;\n        let alignedMipHeight = alignedHeight;\n        let imageOffset = FILE_HEADER_SIZE + bytesOfKeyValueData;\n\n        for (let mipmapLevel = 0; mipmapLevel < numberOfMipmapLevels; mipmapLevel++)\n        {\n            const imageSize = dataView.getUint32(imageOffset, littleEndian);\n            let elementOffset = imageOffset + 4;\n\n            for (let arrayElement = 0; arrayElement < numberOfArrayElements; arrayElement++)\n            {\n                // TODO: Maybe support 3D textures? :-)\n                // for (let zSlice = 0; zSlice < pixelDepth; zSlice)\n\n                let mips = imageBuffers[arrayElement];\n\n                if (!mips)\n                {\n                    mips = imageBuffers[arrayElement] = new Array(numberOfMipmapLevels);\n                }\n\n                mips[mipmapLevel] = {\n                    levelID: mipmapLevel,\n                    levelWidth: numberOfMipmapLevels > 1 ? mipWidth : alignedMipWidth,\n                    levelHeight: numberOfMipmapLevels > 1 ? mipHeight : alignedMipHeight,\n                    levelBuffer: new Uint8Array(arrayBuffer, elementOffset, mipByteSize)\n                };\n                elementOffset += mipByteSize;\n            }\n\n            // HINT: Aligns to 4-byte boundary after jumping imageSize (in lieu of mipPadding)\n            imageOffset += imageSize + 4;// (+4 to jump the imageSize field itself)\n            imageOffset = imageOffset % 4 !== 0 ? imageOffset + 4 - (imageOffset % 4) : imageOffset;\n\n            // Calculate mipWidth, mipHeight for _next_ iteration\n            mipWidth = (mipWidth >> 1) || 1;\n            mipHeight = (mipHeight >> 1) || 1;\n            alignedMipWidth = (mipWidth + blockWidth - 1) & ~(blockWidth - 1);\n            alignedMipHeight = (mipHeight + blockHeight - 1) & ~(blockHeight - 1);\n\n            // Each mipmap level is 4-times smaller?\n            mipByteSize = alignedMipWidth * alignedMipHeight * imagePixelByteSize;\n        }\n\n        // We use the levelBuffers feature of CompressedTextureResource b/c texture data is image-major, not level-major.\n        if (glType !== 0)\n        {\n            throw new Error('TODO: Uncompressed');\n        }\n\n        return imageBuffers.map((levelBuffers) => new CompressedTextureResource(null, {\n            format: glInternalFormat,\n            width: pixelWidth,\n            height: pixelHeight,\n            levels: numberOfMipmapLevels,\n            levelBuffers,\n        }));\n    }\n\n    /**\n     * Checks whether the arrayBuffer contains a valid *.ktx file.\n     */\n    private static validate(url: string, dataView: DataView): boolean\n    {\n        // NOTE: Do not optimize this into 3 32-bit integer comparison because the endianness\n        // of the data is not specified.\n        for (let i = 0; i < FILE_IDENTIFIER.length; i++)\n        {\n            if (dataView.getUint8(i) !== FILE_IDENTIFIER[i])\n            {\n                // #if _DEBUG\n                console.error(`${url} is not a valid *.ktx file!`);\n                // #endif\n\n                return false;\n            }\n        }\n\n        return true;\n    }\n}\n"],"names":["INTERNAL_FORMATS","INTERNAL_FORMAT_TO_BYTES_PER_PIXEL","COMPRESSED_RGB_S3TC_DXT1_EXT","_a","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_R11_EAC","COMPRESSED_SIGNED_R11_EAC","COMPRESSED_RG11_EAC","COMPRESSED_SIGNED_RG11_EAC","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB_ATC_WEBGL","COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL","COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","source","options","width","height","autoLoad","origin","data","Uint8Array","_this","_super","buffer","ViewableBuffer","load","loaded","onBlobLoaded","rawBinaryData","BlobResource","_data","fetch","blob","arrayBuffer","Uint32Array","update","BufferResource","format","levels","_width","_height","_extension","CompressedTextureResource","_formatToExtension","levelBuffers","_levelBuffers","_createLevelBuffers","uint8View","renderer","_texture","_glTexture","gl","context","extensions","Error","i","j","levelID","levelWidth","levelHeight","levelBuffer","compressedTexImage2D","TEXTURE_2D","blockWidth","blockHeight","imageWidth","imageHeight","buffers","offset","byteOffset","alignedLevelWidth","alignedLevelHeight","levelSize","appleIphone","appleIpod","appleTablet","appleUniversal","androidPhone","androidTablet","amazonPhone","amazonTablet","windowsPhone","windowsTablet","otherBlackBerry","otherBlackBerry10","otherOpera","otherChrome","otherFirefox","isAppleTabletOnIos13","navigator","platform","maxTouchPoints","MSStream","createMatch","userAgent","regex","test","isMobile","param","nav","tmp","split","match","apple","phone","ipod","tablet","universal","device","amazon","android","windows","other","blackberry","blackberry10","opera","firefox","chrome","any","isMobileCall","self","maxRecommendedTextures","max","allowMax","parseInt","canUploadSameBuffer","settings","MIPMAP_TEXTURES","ANISOTROPIC_LEVEL","RESOLUTION","FILTER_RESOLUTION","SPRITE_MAX_TEXTURES","SPRITE_BATCH_SIZE","RENDER_OPTIONS","view","antialias","autoDensity","backgroundColor","backgroundAlpha","useContextAlpha","clearBeforeRender","preserveDrawingBuffer","legacy","GC_MODE","GC_MAX_IDLE","GC_MAX_CHECK_COUNT","WRAP_MODE","SCALE_MODE","PRECISION_VERTEX","PRECISION_FRAGMENT","CAN_UPLOAD_SAME_BUFFER","CREATE_IMAGE_BITMAP","ROUND_PIXELS","has","prefix","Events","EE","fn","once","addListener","emitter","event","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","eventNames","events","name","names","slice","getOwnPropertySymbols","concat","listeners","handlers","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","on","removeAllListeners","off","prefixed","module","root","freeExports","exports","nodeType","freeModule","freeGlobal","global","window","punycode","key","maxInt","base","tMin","tMax","skew","damp","initialBias","initialN","delimiter","regexPunycode","regexNonASCII","regexSeparators","errors","overflow","not-basic","invalid-input","baseMinusTMin","floor","Math","stringFromCharCode","String","fromCharCode","error","type","RangeError","map","array","mapDomain","string","parts","replace","join","ucs2decode","extra","output","counter","charCodeAt","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","k","decode","input","out","basic","index","oldi","w","baseMinusT","codePoint","inputLength","bias","lastIndexOf","splice","encode","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","version","ucs2","toASCII","toUnicode","toLowerCase","isString","arg","isObject","isNull","isNullOrUndefined","obj","prop","qs","sep","eq","regexp","maxKeys","kstr","vstr","x","idx","indexOf","substr","decodeURIComponent","isArray","stringifyPrimitive","isFinite","keys","ks","encodeURIComponent","require$$0","require$$1","urlParse","urlResolve","urlFormat","Url","protocol","slashes","auth","host","port","hostname","hash","search","query","pathname","path","href","protocolPattern","portPattern","simplePathPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","url","parseQueryString","slashesDenoteHost","util","u","parse","relative","queryIndex","splitter","uSplit","rest","trim","simplePath","exec","querystring","proto","lowerProto","atSign","hostEnd","hec","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","unshift","h","ae","esc","escape","qm","s","stringify","charAt","resolveObject","rel","tkeys","tk","tkey","rkeys","rk","rkey","relPath","shift","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","last","hasTrailingSlash","up","isAbsolute","_parse","_format","_resolve","mapPremultipliedBlendModes","pm","npm","BLEND_MODES","NORMAL_NPM","NORMAL","ADD_NPM","ADD","SCREEN_NPM","SCREEN","RETINA_PREFIX","FAIL_IF_MAJOR_PERFORMANCE_CAVEAT","premultiplyBlendMode","resolution","canvas","document","createElement","getContext","resize","CanvasRenderTarget","setTransform","clearRect","val","CompressedTextureLoader","resource","LoaderResource","TYPE","JSON","cacheID","textures","textureURL","fallbackURL","texture","url_1","src","textureFormats","loadOptions","crossOrigin","metadata","imageMetadata","parentResource","resourcePath","baseUrl","resourceName","add","res","_b","assign","s3tc","getExtension","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","extensionName","textureExtensions","extension","getPrototypeOf","registerCompressedTextures","resources","Texture","BaseTexture","mipmap","MIPMAP_MODES","OFF","alphaMode","ALPHA_MODES","NO_PREMULTIPLIED_ALPHA","forEach","baseTexture","addToCache","setExtensionXhrType","XHR_RESPONSE_TYPE","BUFFER","DXGI_FORMAT","D3D10_RESOURCE_DIMENSION","DDS_MAGIC_SIZE","DDS_HEADER_SIZE","DDS_HEADER_PF_SIZE","DDS_HEADER_DX10_SIZE","DDS_MAGIC","DDS_FIELDS","SIZE","FLAGS","HEIGHT","WIDTH","MIPMAP_COUNT","PIXEL_FORMAT","DDS_PF_FIELDS","FOURCC","RGB_BITCOUNT","R_BIT_MASK","G_BIT_MASK","B_BIT_MASK","A_BIT_MASK","DDS_DX10_FIELDS","RESOURCE_DIMENSION","MISC_FLAG","ARRAY_SIZE","MISC_FLAGS2","PF_FLAGS","DDPF_ALPHA","DDPF_FOURCC","DDPF_RGB","DDPF_YUV","DDPF_LUMINANCE","FOURCC_DXT1","FOURCC_DXT3","FOURCC_DXT5","FOURCC_DX10","DDS_RESOURCE_MISC_TEXTURECUBE","FOURCC_TO_FORMAT","DXGI_TO_FORMAT","DXGI_FORMAT_BC1_TYPELESS","DXGI_FORMAT_BC1_UNORM","DXGI_FORMAT_BC2_TYPELESS","DXGI_FORMAT_BC2_UNORM","DXGI_FORMAT_BC3_TYPELESS","DXGI_FORMAT_BC3_UNORM","DXGI_FORMAT_BC1_UNORM_SRGB","DXGI_FORMAT_BC2_UNORM_SRGB","DXGI_FORMAT_BC3_UNORM_SRGB","DDSLoader","err","header","BYTES_PER_ELEMENT","mipmapCount","pixelFormat","formatFlags","fourCC","internalFormat_1","texData","dx10Offset","dx10Header","dxgiFormat","resourceDimension","miscFlag","arraySize","internalFormat_2","DDS_DIMENSION_TEXTURE3D","imageBuffers","dataOffset","pixelSize","imageSize","imageOffset","FILE_IDENTIFIER","ENDIANNESS","KTX_FIELDS","GL_TYPE","GL_TYPE_SIZE","GL_FORMAT","GL_INTERNAL_FORMAT","GL_BASE_INTERNAL_FORMAT","PIXEL_WIDTH","PIXEL_HEIGHT","PIXEL_DEPTH","NUMBER_OF_ARRAY_ELEMENTS","NUMBER_OF_FACES","NUMBER_OF_MIPMAP_LEVELS","BYTES_OF_KEY_VALUE_DATA","FILE_HEADER_SIZE","TYPES_TO_BYTES_PER_COMPONENT","TYPES","UNSIGNED_BYTE","UNSIGNED_SHORT","FLOAT","HALF_FLOAT","FORMATS_TO_COMPONENTS","FORMATS","RGBA","RGB","LUMINANCE","LUMINANCE_ALPHA","ALPHA","TYPES_TO_BYTES_PER_PIXEL","UNSIGNED_SHORT_4_4_4_4","_c","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","KTXLoader","dataView","DataView","validate","littleEndian","getUint32","glType","glFormat","glInternalFormat","pixelWidth","pixelHeight","pixelDepth","numberOfArrayElements","numberOfFaces","numberOfMipmapLevels","bytesOfKeyValueData","imagePixelByteSize","alignedWidth","alignedHeight","imagePixels","mipByteSize","mipWidth","mipHeight","alignedMipWidth","alignedMipHeight","mipmapLevel","elementOffset","arrayElement","mips","getUint8"],"mappings":"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,4EACAA,oFACAA,kFACAA,4EACAA,sEACAA,oEACAA,kEACAA,sEACAA,gEACAA,0EACAA,8DACAA,gEACAA,8DACAA,kEACAA,4DACAA,4DACAA,0DACAA,4DACAA,0DACAA,4DACAA,sDACAA,sDACAA,oDACAA,oDACAA,gEACAA,sEACAA,8EACAA,4EACAA,8DACAA,wDACAA,sDACAA,wDACAA,sDACAA,4DACAA,sDACAA,sDACAA,sDACAA,oDACAA,sDACAA,oDACAA,0DACAA,oDACAA,kDACAA,oDACAA,kDACAA,oDACAA,oDACAA,wEACAA,kEACAA,kEACAA,4DACAA,sDACAA,gEACAA,4DACAA,sDACAA,gEACAA,4DACAA,sDACAA,gEACAA,4DACAA,sDACAA,sDACAA,4DACAA,sDACAA,sDACAA,4DACAA,gEACAA,gEACAA,gEACAA,wFACAA,sEACAA,0EACAA,sEACAA,0EACAA,8DACAA,sDACAA,sDACAA,4DACAA,sDACAA,gEACAA,6CACAA,6CACAA,6CACAA,6CACAA,6CACAA,6CACAA,yDACAA,6CACAA,6CACAA,6CACAA,6CACAA,6CACAA,6CACAA,yCACAA,6CACAA,iEACAA,6CACAA,6CACAA,6CACAA,mGACAA,mHACAA,yDA1HJ,CAAKA,cAAAA,iBAkIL,SAAKC,GACDA,yDACAA,yDACAA,yDAHJ,CAAKA,2BAAAA,8BAML,iBAAMyB,SAAW,EAGXC,WAAa,EACbC,YAAc,EACdC,SAAW,GACXC,SAAW,IACXC,eAAiB,OAGjBC,YAAc,UACdC,YAAc,UACdC,YAAc,UACdC,YAAc,UAGdC,8BAAgC,EAOhCC,4BACDL,aAAc7kB,yBAAiBI,8BAChCD,KAAC2kB,aAAc9kB,yBAAiBK,8BAChCF,KAAC4kB,aAAc/kB,yBAAiBM,oCAQ9B6kB,wBAEDtC,YAAYuC,0BAA2BplB,yBAAiBI,8BACzD2gB,GAAC8B,YAAYwC,uBAAwBrlB,yBAAiBI,8BACtD2gB,GAAC8B,YAAYyC,0BAA2BtlB,yBAAiBK,8BACzD0gB,GAAC8B,YAAY0C,uBAAwBvlB,yBAAiBK,8BACtD0gB,GAAC8B,YAAY2C,0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"}